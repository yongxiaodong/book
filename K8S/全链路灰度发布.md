# 业界内的传统的灰度发布类型


## 滚动发布

- 原理：假设A服务的v1版本部署了10个节点，需要发布v2版本时，按照指定的比例轮询将这10个节点升级到v2版本
- 缺陷：在发布期间，用户的请求可能会路由到v2版本处理，也可能会路由到v1版本处理;当版本涉及数据库等、接口字段类型等变更时将会造成客户端不可预知的错误


## 蓝绿发布

- 原理： 假设A服务的V1版本部署了10个节点，需要发布v2版本时，先将v2版本也不熟10个节点，然后再统一将v1版本的所有流量路由到v2版本。蓝色发布很多时候配合流量比例使用
- 缺陷:  

## 按流量比例发布

原理：比如基于hash、会话、随机等策略使70%的流量到达v1版本，30%的流量到达v2版本
缺陷：

## 虚假灰度环境

原理：

## 全链路灰度发布系统需要解决的问题

流量打标
打标流量路由
权重配置
流量治理
环境定制





